# 阿里云DashScope模型配置说明

本文档说明如何在本项目中配置和使用阿里云DashScope模型。

## 1. 获取API密钥

1. 访问 [阿里云百炼大模型平台](https://bailian.console.aliyun.com/)
2. 注册并登录账号
3. 在控制台中获取您的API密钥

## 2. 配置环境变量

### 方法一：使用环境变量文件

1. 复制示例文件：
   ```bash
   cp .env.example .env
   ```

2. 编辑 `.env` 文件，填入您的API密钥：
   ```
   DASHSCOPE_API_KEY=sk-您的阿里云API密钥
   ```

### 方法二：直接设置环境变量

在系统中设置环境变量：
- Windows:
  ```cmd
  set DASHSCOPE_API_KEY=sk-您的阿里云API密钥
  ```
- Linux/macOS:
  ```bash
  export DASHSCOPE_API_KEY=sk-您的阿里云API密钥
  ```

## 3. 项目配置

在项目的 `model_settings.yaml` 配置文件中，您可以看到已经添加的DashScope平台配置：

```yaml
MODEL_PLATFORMS:
  # ... 其他配置
  - platform_name: dashscope
    platform_type: openai
    api_base_url: https://dashscope.aliyuncs.com/compatible-mode/v1
    api_key: ${DASHSCOPE_API_KEY}  # 使用环境变量
    api_concurrencies: 5
    llm_models:
      - qwen-max
      - qwen-plus
      - qwen-turbo
      - qwen2-instruct
      - qwen2.5-72b-instruct
    embed_models:
      - text-embedding-v1
      - text-embedding-v2
      - text-embedding-v3
```

## 4. 使用说明

1. 启动项目前确保环境变量已正确设置
2. 在前端界面或API调用中选择对应的阿里云模型（如qwen-max）
3. 模型将通过DashScope API进行调用

## 5. 支持的模型

### LLM模型
- qwen-max：通义千问Max版本，适合复杂、多步骤任务
- qwen-plus：通义千问Plus版本，平衡推理效果和成本
- qwen-turbo：通义千问Turbo版本，速度快、成本低
- qwen2-instruct：通义千问2指令版本
- qwen2.5-72b-instruct：通义千问2.5 72B指令版本

### Embedding模型
- text-embedding-v1：文本嵌入v1
- text-embedding-v2：文本嵌入v2
- text-embedding-v3：文本嵌入v3

## 6. 注意事项

1. 确保API密钥安全，不要将密钥提交到代码仓库
2. 阿里云API调用会产生费用，请注意控制使用量
3. 确保网络可以正常访问阿里云API服务
4. 如果遇到连接问题，请检查网络和API密钥是否正确